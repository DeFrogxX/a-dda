#
# job name (default is name of pbs script file)
#PBS -N  DDA
#
# request nodes
#PBS -l nodes=32
#
# request 2GB memory
#PBS -l mem=2gb
#
# shell to be used for this script
#PBS -S /bin/sh
#
# max. wall clock time
#PBS -l walltime=1000:00:00
#
#   Request that regular output and terminal output go to the same file
#PBS -j oe
#
# send me mail when job begins
##PBS -m b
# send me mail when job end
##PBS -m e
# send me mail when job aborts (with an error)
##PBS -m a
# if you want more than one message, you must group flags on one line,
# otherwise, only the last flag selected executes:
#PBS -mbea
#
# do not rerun this job if it fails
#PBS -r n
#
# export all my environment variables to the job
#PBS -V
#
#
# Using PBS - Environment Variables
# When a batch job starts execution, a number of environment variables are
# predefined, which include:
#
#      Variables defined on the execution host.
#      Variables exported from the submission host with
#                -v (selected variables) and -V (all variables).
#      Variables defined by PBS.
#
# The following reflect the environment where the user ran qsub:
# PBS_O_HOST    The host where you ran the qsub command.
# PBS_O_LOGNAME Your user ID where you ran qsub.
# PBS_O_HOME    Your home directory where you ran qsub.
# PBS_O_WORKDIR The working directory where you ran qsub.
#
# These reflect the environment where the job is executing:
# PBS_ENVIRONMENT       Set to PBS_BATCH to indicate the job is a batch job, or
# to PBS_INTERACTIVE to indicate the job is a PBS interactive job.
# PBS_O_QUEUE   The original queue you submitted to.
# PBS_QUEUE     The queue the job is executing from.
# PBS_JOBID     The job's PBS identifier.
# PBS_JOBNAME   The job's name.
# PBS_NODEFILE  the name of the file contain the list of nodes assigned
#               to the job (for parallel and cluster systems).
###
cd $PBS_O_WORKDIR
n=`wc -l < $PBS_NODEFILE`
echo job running on $n processors
echo nodes:
cat $PBS_NODEFILE
/usr/local/mpich/bin/mpirun -np $n -machinefile $PBS_NODEFILE ./scatter -dpl 15 -grid 12 -m 1.5 0.1 1.0 0.0 -store_int_field
