CSOURCE = CD2main.c  calculator.c make_particle.c CalculateE.c \
          GenerateB.c \
          CGNR.c MatVec_nim.c memory.c field.c comm.c matvec.c \
          fft.c crosssec.c Romberg.c read_cluster.c
FSOURCE = cfft99D.f

COBJECTS= $(CSOURCE:.c=.o) 
FOBJECTS= $(FSOURCE:.f=.o)

# Sun Workstation settings:
#MPIARCH	= solaris
#MPICOMM	= ch_p4
#MPIHOME	= /usr/local/mpi/MPICH
#CFLAGS	= -I$(MPIHOME)/include -DMPI
#LDFLAGS	= -L$(MPIHOME)/lib/$(MPIARCH)/$(MPICOMM)
#LDLIBS	= -lm -lmpi -lsocket -lnsl

CFLAGS	= -DMPI
LDLIBS	= -lm 
CC	= mpicc
CF	= mpif77 

# MPI-PowerXplorer settings
#ARCH	= parix
#COMM	= ch_px
#MPIHOME	= /usr/local/mpi/mpich-nk
#CFLAGS	= -I$(MPIHOME)/include -DPowerPVM -DMPI
#LDFLAGS	= -L$(MPIHOME)/lib/$(ARCH)/$(COMM)
#LDLIBS	= -lmpi -lm
#CC	= px ancc.px
#CF	= px f77.px 


scatter: $(COBJECTS) $(FOBJECTS) 
	$(CF) -g -w -o $@ $(COBJECTS) $(FOBJECTS) $(LDFLAGS) $(LDLIBS)

.c.o:
	$(CC) -g -c -w $(CFLAGS) -DSINGLE $<

.f.o:
	$(CF) -g -c -w $<

